(()=>{"use strict";class e{$selectionCategoryField=jQuery("#fq_selection_category");$selectionField=jQuery("#fq_selections");init(){this.initSelect2(),this.$selectionCategoryField.on("change",(()=>this.templateCategorySelected())),this.$selectionCategoryField.trigger("change")}initSelect2(){this.$selectionCategoryField.select2({placeholder:wp.i18n.__("Template category","flexible-quantity-core"),minimumResultsForSearch:1/0}),this.$selectionField.select2({minimumInputLength:0,placeholder:"",allowClear:!0,ajax:{url:fq_admin_params.ajax_url,dataType:"json",delay:300,data:e=>({category:this.$selectionCategoryField.val(),action:fq_admin_params.action_get_options,nonce:fq_admin_params.selection_nonce,search:e.term,page:e.page||1}),processResults:(e,i)=>(i.page=i.page||1,{results:e.data.options,pagination:e.data.pagination}),cache:!0}})}loadSelected(e){jQuery.ajax({type:"POST",url:fq_admin_params.ajax_url,dataType:"json",delay:250,data:{category:e,action:fq_admin_params.action_get_selected,template_id:fq_admin_params.template_id,pre_select_product_id:this.$selectionField.data("pre-select-product-id"),nonce:fq_admin_params.selection_nonce},success:e=>{!0===e.success?(this.$selectionField.empty(),e.data.forEach((e=>{const i=new Option(e.text,e.id,!0,!0);this.$selectionField.append(i).trigger("change")}))):console.error("Error fetching options",e.data)},error:(e,i,t)=>{console.error("Error fetching options",t)}})}templateCategorySelected(){const e=this.$selectionCategoryField.val();e?this.loadSelected(e):this.$selectionField.empty()}}class i{$unitLabelField=jQuery("#fq_label");$unitField=jQuery("#fq_unit");$enabler=jQuery("#fq_decimals_enabled");$section=jQuery("#fq-decimals-panel");typeSelector=".fq_field_type_selector";$selectionField=jQuery("#fq_selections");init(){this.$unitField.on("change",(()=>this.toggle())),this.$enabler.on("click",(()=>this.toggle())),jQuery(document).on("change",this.typeSelector,(e=>this.changeDimensionInputType(e.currentTarget))),this.$unitField.trigger("change")}loadDimensionFields(){this.$section.html(fq_admin_params.loader_img);const e=this.$selectionField.data("pre-select-product-id")||fq_admin_params.template_id;jQuery.ajax({type:"POST",cache:!1,url:fq_admin_params.ajax_url,data:{action:fq_admin_params.action_get_dimensions,template_id:e,unit:this.$unitField.val(),nonce:fq_admin_params.dimensions_nonce},success:e=>{!0===e.success?(this.$section.html(e.data.content),this.initDimensionFields(),this.$section.find(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0})):console.error("Error loading dimension table",e.data)},error:(e,i,t)=>{console.error("Error loading dimension table.",t)}})}toggle(){this.isEnabled()?(this.$section.show(),this.$unitLabelField.attr("disabled","disabled"),this.loadDimensionFields()):(this.$section.hide(),this.$unitLabelField.removeAttr("disabled"))}initDimensionFields(){jQuery(document).find(this.typeSelector).each(((e,i)=>{this.changeDimensionInputType(i)}))}changeDimensionInputType(e){const i=jQuery(e),t=i.val(),a=i.closest(".fq-field-type");a.find(".decimals-fields-with-labels").addClass("hidden"),a.find(`.${t}-fields`).removeClass("hidden")}isEnabled(){return this.$enabler.is(":checked")}}class t{$productData=jQuery("#measurement_product_data");$pricingTable=jQuery(".fcm-pricing-table");$pricingTableEnabler=jQuery(".show_table_pricing");$shippingTable=jQuery(".fcm-shipping-table");$shippingTableEnabler=jQuery(".show_table_shipping");insertSelector="td.actions a.insert";removeSelector="td.actions a.remove";init(){this.$pricingTableEnabler.on("change",(()=>this.toggle(this.$pricingTableEnabler,this.$pricingTable))),this.$shippingTableEnabler.on("change",(()=>this.toggle(this.$shippingTableEnabler,this.$shippingTable))),this.$productData.on("click",this.insertSelector,(e=>this.insert(e.currentTarget))),this.$productData.on("click",this.removeSelector,(e=>this.remove(e.currentTarget))),this.$pricingTableEnabler.trigger("change"),this.$shippingTableEnabler.trigger("change"),this.initHelpTips()}toggle(e,i){e.is(":checked")?i.show():i.hide()}insert(e){const i=jQuery(e).closest("tr").clone();return jQuery(e).closest("tr").after(`<tr>${i.html()}</tr>`),!1}remove(e){return jQuery(e).closest("tr").remove(),!1}initHelpTips(){jQuery(document).find(".woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0})}}jQuery((()=>{if("undefined"==typeof fq_admin_params)return!1;const a=new e,n=new i,s=new t;a.init(),n.init(),s.init()}))})();
//# sourceMappingURL=admin.38880d0b75d5b236d9982034b2001c78.js.map